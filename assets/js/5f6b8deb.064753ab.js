"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[4512],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),d=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=d(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=d(n),u=r,f=c["".concat(l,".").concat(u)]||c[u]||p[u]||i;return n?a.createElement(f,o(o({ref:t},m),{},{components:n})):a.createElement(f,o({ref:t},m))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4740:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return d},default:function(){return v},frontMatter:function(){return l},metadata:function(){return m},toc:function(){return c}});var a,r=n(3117),i=n(102),o=(n(7294),n(3905)),s=["components"],l={title:"Retrieve a datamart definition",description:"This topic covers several workflows to retrieve an Datamart definition."},d=void 0,m={unversionedId:"common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition",id:"common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition",title:"Retrieve a datamart definition",description:"This topic covers several workflows to retrieve an Datamart definition.",source:"@site/docs/common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition.md",sourceDirName:"common-workflows/modeling/manage-datamart-objects",slug:"/common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition",permalink:"/rest-api-docs/common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition",draft:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/modeling/manage-datamart-objects/retrieve-a-datamart-definition.md",tags:[],version:"current",lastUpdatedBy:"xdumstr",lastUpdatedAt:1676479687,formattedLastUpdatedAt:"Feb 15, 2023",frontMatter:{title:"Retrieve a datamart definition",description:"This topic covers several workflows to retrieve an Datamart definition."},sidebar:"tutorialSidebar",previous:{title:"Manage datamart objects",permalink:"/rest-api-docs/common-workflows/modeling/manage-datamart-objects/"},next:{title:"Create a datamart from a source report",permalink:"/rest-api-docs/common-workflows/modeling/manage-datamart-objects/create-a-datamart-from-a-source-report"}},p={},c=[{value:"Retrieve a datamart definition",id:"retrieve-a-datamart-definition",level:2},{value:"Retrieve a datamart definition with a filter in tokens format",id:"retrieve-a-datamart-definition-with-a-filter-in-tokens-format",level:2},{value:"Retrieve a datamart definition with a filter custom expression in tree and tokens formats",id:"retrieve-a-datamart-definition-with-a-filter-custom-expression-in-tree-and-tokens-formats",level:2},{value:"Retrieve a datamart definition with advanced properties",id:"retrieve-a-datamart-definition-with-advanced-properties",level:2}],u=(a="Available",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)}),f={toc:c};function v(e){var t=e.components,n=(0,i.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(u,{since:"2021 Update 7",mdxType:"Available"}),(0,o.kt)("p",null,"This topic covers several workflows to retrieve a datamart definition:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#retrieve-a-datamart-definition"},"Retrieve a datamart definition")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#retrieve-a-datamart-definition-with-a-filter-in-tokens-format"},"Retrieve a datamart definition with a filter in tokens format")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#retrieve-a-datamart-definition-with-a-filter-custom-expression-in-tree-and-tokens-formats"},"Retrieve a datamart definition with a filter custom expression in tree and tokens formats")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#retrieve-a-datamart-definition-with-advanced-properties"},"Retrieve a datamart definition with advanced properties"))),(0,o.kt)("p",null,'You want to get the definition of the \u201cCustomer" datamart object as below screenshot with datamart options. The object ID of the datamart is \u202fCEA3C6FC4E6749C8F8B19580D16D2443 in the "MicroStrategy Tutorial" project. The project ID is B7CA92F04B9FAE8D941C3E9B7E0CD754.'),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"An authorization token allows the API layer to hide internal session-related implementations such as managing different project-specific sessions. Once the REST API layer has validated the user's credentials using the specified authentication mode, it initiates a session with the Intelligence Server and creates a unique authorization token for the client."),(0,o.kt)("p",{parentName:"admonition"},"Obtain the authorization token needed to execute the request using ",(0,o.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Authentication/postLogin"},"POST /api/auth/login"),"."),(0,o.kt)("p",{parentName:"admonition"},"Obtain the project ID from ",(0,o.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Projects/getProjects_1"},"GET /api/projects"),".")),(0,o.kt)("p",null,"The response can change based on the request parameters provided by the caller. Use the following parameters:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Location"),(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"header"),(0,o.kt)("td",{parentName:"tr",align:null},"X-MSTR-authToken"),(0,o.kt)("td",{parentName:"tr",align:null},"The authorization token.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"header"),(0,o.kt)("td",{parentName:"tr",align:null},"X-MSTR-ProjectID"),(0,o.kt)("td",{parentName:"tr",align:null},"The ID of the project.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"params"),(0,o.kt)("td",{parentName:"tr",align:null},"showFilterTokens"),(0,o.kt)("td",{parentName:"tr",align:null},'Specify whether the Datamart\u2019s "filter" is returned in "tokens" format, along with "text" and "tree" formats.')),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"params"),(0,o.kt)("td",{parentName:"tr",align:null},"showExpressionAs"),(0,o.kt)("td",{parentName:"tr",align:null},"Specify the format in which the expressions are returned in response, applied to the expressions in a fact or attribute and custom expressions used in a filter, prompt, security filter, custom group, etc.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"params"),(0,o.kt)("td",{parentName:"tr",align:null},"showAdvancedProperties"),(0,o.kt)("td",{parentName:"tr",align:null},"Specify whether the datamart\u2019s definition is returned with advanced properties.")))),(0,o.kt)("h2",{id:"retrieve-a-datamart-definition"},"Retrieve a datamart definition"),(0,o.kt)("p",null,"Retrieve the datamart definition using ",(0,o.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Datamarts/get_api_model_datamarts__datamartId_"},"GET /api/model/datamarts/{datamartId}"),"."),(0,o.kt)("p",null,"Sample Curl:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/model/datamarts/CEA3C6FC4E6749C8F8B19580D16D2443' \\\n  -H 'accept: application/json' \\\n  -H 'X-MSTR-AuthToken: 767tgudpermlvic06qb4mauv9k' \\\n  -H 'X-MSTR-ProjectID: B7CA92F04B9FAE8D941C3E9B7E0CD754'\n")),(0,o.kt)("p",null,"Sample Response Body:"),(0,o.kt)("p",null,"You can view the datamart definition in the body of the response. Below is an example of the filter in ",(0,o.kt)("inlineCode",{parentName:"p"},"text")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"tree")," formats."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "information": {\n    "dateCreated": "2022-08-31T06:59:57.985Z",\n    "dateModified": "2022-09-08T03:28:05.547Z",\n    "versionId": "70F09F0F4F5A2D620921FBB2CB4B4AD2",\n    "acg": 255,\n    "primaryLocale": "en-US",\n    "objectId": "CEA3C6FC4E6749C8F8B19580D16D2443",\n    "subType": "report_datamart",\n    "name": "Customer",\n    "destinationFolderId": "8A1831FF494F528D02A4A8BF5FB73459"\n  },\n  "sourceType": "normal",\n  "dataSource": {\n    "dataTemplate": {\n      "units": [\n        {\n          "id": "8D679D3C11D3E4981000E787EC6DE8A4",\n          "name": "Customer",\n          "type": "attribute"\n        },\n        {\n          "type": "metrics",\n          "elements": [\n            {\n              "id": "7FD5B69611D5AC76C000D98A4CC5F24F",\n              "name": "Cost",\n              "subType": "metric"\n            }\n          ]\n        }\n      ]\n    },\n    "filter": {\n      "text": "{Customer Region} = Northeast",\n      "tree": {\n        "type": "predicate_element_list",\n        "predicateId": "5F0037DA9E5E4923B379D2D581965D24",\n        "predicateTree": {\n          "attribute": {\n            "objectId": "8D679D3B11D3E4981000E787EC6DE8A4",\n            "subType": "attribute",\n            "name": "Customer Region"\n          },\n          "elements": [\n            {\n              "display": "Northeast",\n              "elementId": "h1"\n            }\n          ],\n          "function": "in"\n        }\n      }\n    }\n  },\n  "datamartOptions": {\n    "append": true,\n    "targetSource": {\n      "objectId": "62871E84AEBB479C92F81BB075A55910",\n      "subType": "db_role_cloud_element",\n      "name": "Sage One"\n    },\n    "tableName": "!p_adddata_shxu",\n    "placeholderIncluded": true,\n    "datamartProperties": {\n      "[DatamartProperties].[Create Table Post String]": {\n        "name": "Create Table Post String",\n        "value": "create",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Insert SQLs]": {\n        "name": "Insert SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Execution Time]": {\n        "name": "Maximum Execution Time",\n        "value": "11",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Rows]": {\n        "name": "Maximum Rows",\n        "value": "999999999",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Post SQLs]": {\n        "name": "Post SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Pre SQLs]": {\n        "name": "Pre SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Descriptor]": {\n        "name": "Table Descriptor",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Option]": {\n        "name": "Table Option",\n        "value": "options",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Prefix]": {\n        "name": "Table Prefix",\n        "value": "test",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Qualifier]": {\n        "name": "Table Qualifier",\n        "value": "a",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Space]": {\n        "name": "Table Space",\n        "value": "shxu",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Type]": {\n        "name": "Table Type",\n        "value": "1",\n        "type": "int32",\n        "resolvedLocation": "object"\n      }\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Response Code: 200 (The datamart definition is returned successfully.)"),(0,o.kt)("h2",{id:"retrieve-a-datamart-definition-with-a-filter-in-tokens-format"},"Retrieve a datamart definition with a filter in tokens format"),(0,o.kt)("p",null,"This workflow sample demonstrates how to retrieve the definition of a datamart with its filter in tokens format through the Modeling service. Unlike the first workflow, you want to enable the showFilterTokens parameter to retrieve the filter definition in tokens format as well."),(0,o.kt)("p",null,"A filter qualification is presented in the following formats:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'"text": A human readable, but non-parsable text, describing a filter\'s qualification.'),(0,o.kt)("li",{parentName:"ul"},'"tree": A tree data structure fully defining the filter\'s qualification.'),(0,o.kt)("li",{parentName:"ul"},'"tokens": A list of parsed tokens that define a filter\'s qualification. Be aware that generating tokens requires additional time.')),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showFilterTokens"),' is omitted or false, only "text" and "tree" formats are returned.'),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showFilterTokens"),' is true, all "text", "tree" and "tokens" formats are returned.'),(0,o.kt)("p",null,"This workflow sample is similar to Retrieve a Datamart Definition, except with showFilterTokens=true."),(0,o.kt)("p",null,"Sample Curl:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/model/datamarts/CEA3C6FC4E6749C8F8B19580D16D2443?showFilterTokens=true' \\\n  -H 'accept: application/json' \\\n  -H 'X-MSTR-AuthToken: n64eqd6mi28ma3vp8tmf8b1jdg' \\\n  -H 'X-MSTR-ProjectID: B7CA92F04B9FAE8D941C3E9B7E0CD754'\n")),(0,o.kt)("p",null,"Sample Response Body:"),(0,o.kt)("p",null,"You can view the Datamart definition in the body of the response in ",(0,o.kt)("inlineCode",{parentName:"p"},"text"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"tree"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"tokens")," formats."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "information": {\n    "dateCreated": "2022-08-31T06:59:57.985Z",\n    "dateModified": "2022-09-08T03:28:05.547Z",\n    "versionId": "70F09F0F4F5A2D620921FBB2CB4B4AD2",\n    "acg": 255,\n    "primaryLocale": "en-US",\n    "objectId": "CEA3C6FC4E6749C8F8B19580D16D2443",\n    "subType": "report_datamart",\n    "name": "Customer",\n    "destinationFolderId": "8A1831FF494F528D02A4A8BF5FB73459"\n  },\n  "sourceType": "normal",\n  "dataSource": {\n    "dataTemplate": {\n      "units": [\n        {\n          "id": "8D679D3C11D3E4981000E787EC6DE8A4",\n          "name": "Customer",\n          "type": "attribute"\n        },\n        {\n          "type": "metrics",\n          "elements": [\n            {\n              "id": "7FD5B69611D5AC76C000D98A4CC5F24F",\n              "name": "Cost",\n              "subType": "metric"\n            }\n          ],\n          "limit": {\n            "tokens": []\n          }\n        }\n      ]\n    },\n    "filter": {\n      "text": "{Customer Region} = Northeast",\n      "tree": {\n        "type": "predicate_element_list",\n        "predicateId": "980459BEE19243D9ABF1D6224B7DD7F0",\n        "predicateTree": {\n          "attribute": {\n            "objectId": "8D679D3B11D3E4981000E787EC6DE8A4",\n            "subType": "attribute",\n            "name": "Customer Region"\n          },\n          "elements": [\n            {\n              "display": "Northeast",\n              "elementId": "h1"\n            }\n          ],\n          "function": "in"\n        }\n      },\n      "tokens": [\n        {\n          "level": "resolved",\n          "state": "initial",\n          "value": "%",\n          "type": "character"\n        },\n        {\n          "level": "resolved",\n          "state": "initial",\n          "value": "[Customer Region]",\n          "type": "object_reference",\n          "target": {\n            "dateCreated": "2001-01-02T20:48:07.000Z",\n            "dateModified": "2022-03-31T03:54:54.000Z",\n            "versionId": "DDFEE73C42D3E76DEC239A9F1D734FFC",\n            "acg": 255,\n            "primaryLocale": "en-US",\n            "objectId": "8D679D3B11D3E4981000E787EC6DE8A4",\n            "subType": "attribute",\n            "name": "Customer Region"\n          }\n        },\n        {\n          "level": "resolved",\n          "state": "initial",\n          "value": "In",\n          "type": "function",\n          "target": {\n            "dateCreated": "1900-01-01T00:00:00.000Z",\n            "dateModified": "2021-02-26T03:18:34.000Z",\n            "versionId": "A3808F5B4E6620E24102E48D99550BB2",\n            "acg": 255,\n            "primaryLocale": "en-US",\n            "objectId": "8107C325DD9911D3B98100C04F2233EA",\n            "subType": "function",\n            "name": "In",\n            "description": "Returns TRUE if Arg1 is in Arg2, otherwise, returns FALSE."\n          }\n        },\n        {\n          "level": "resolved",\n          "state": "initial",\n          "value": "{Customer Region=Northeast}",\n          "type": "elements"\n        },\n        {\n          "level": "resolved",\n          "state": "initial",\n          "value": "",\n          "type": "end_of_text"\n        }\n      ]\n    }\n  },\n  "datamartOptions": {\n    "append": true,\n    "targetSource": {\n      "objectId": "62871E84AEBB479C92F81BB075A55910",\n      "subType": "db_role_cloud_element",\n      "name": "Sage One"\n    },\n    "tableName": "!p_adddata_shxu",\n    "placeholderIncluded": true,\n    "datamartProperties": {\n      "[DatamartProperties].[Create Table Post String]": {\n        "name": "Create Table Post String",\n        "value": "create",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Insert SQLs]": {\n        "name": "Insert SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Execution Time]": {\n        "name": "Maximum Execution Time",\n        "value": "11",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Rows]": {\n        "name": "Maximum Rows",\n        "value": "999999999",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Post SQLs]": {\n        "name": "Post SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Pre SQLs]": {\n        "name": "Pre SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Descriptor]": {\n        "name": "Table Descriptor",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Option]": {\n        "name": "Table Option",\n        "value": "options",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Prefix]": {\n        "name": "Table Prefix",\n        "value": "test",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Qualifier]": {\n        "name": "Table Qualifier",\n        "value": "a",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Space]": {\n        "name": "Table Space",\n        "value": "shxu",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Type]": {\n        "name": "Table Type",\n        "value": "1",\n        "type": "int32",\n        "resolvedLocation": "object"\n      }\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Response Code: 200 (The datamart definition is returned successfully.)"),(0,o.kt)("h2",{id:"retrieve-a-datamart-definition-with-a-filter-custom-expression-in-tree-and-tokens-formats"},"Retrieve a datamart definition with a filter custom expression in tree and tokens formats"),(0,o.kt)("p",null,'In this workflow sample, you want to get a datamart definition when its filter contains the inline custom expression\u201dcost + 1000 > 10000", with the expression returned in tree and tokens formats. The object ID of the cube is B017E2E54F4967B2C8A6759459248BE8.'),(0,o.kt)("p",null,"The expression is presented in the following formats:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'"text": A human readable, but non-parsable text, describing the expression. This is the default format that is always returned in the response.'),(0,o.kt)("li",{parentName:"ul"},'"tree": A tree data structure fully defining the expression. This format can be used if you want to examine and modify the expression programmatically.'),(0,o.kt)("li",{parentName:"ul"},'"tokens": A list of parsed tokens. This format can be used if you want to examine and modify the expression using the parser component. Note that generating tokens requires additional time.')),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showExpressionAs"),' is omitted, the expression is returned in "text" format.'),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showExpressionAs")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"tree"),', the expression is returned in "text" and "tree" formats.'),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showExpressionAs")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"tokens"),', the expression is returned in "text" and "tokens" formats.'),(0,o.kt)("p",null,"Get the datamart filter definition with its inline custom expression in tree and tokens format. This workflow is similar to Retrieve a Datamart's Definition, except with showExpressionAs=tokens using GET /api/model/datamarts/{datamartId}."),(0,o.kt)("p",null,"Sample Curl:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/model/datamarts/B017E2E54F4967B2C8A6759459248BE8?showExpressionAs=tokens' \\\n  -H 'accept: application/json' \\\n  -H 'X-MSTR-AuthToken: la1loq0l5700p1lm95gb08ktb6' \\\n  -H 'X-MSTR-ProjectID: B7CA92F04B9FAE8D941C3E9B7E0CD754'\n")),(0,o.kt)("p",null,"Sample Response Body: You can view the Datamart definition in the body of the response."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "information": {\n    "dateCreated": "2022-09-08T06:32:28.551Z",\n    "dateModified": "2022-09-08T06:41:23.153Z",\n    "versionId": "B60AB35E41EE93C408F734BC4B542F64",\n    "acg": 255,\n    "primaryLocale": "en-US",\n    "objectId": "B017E2E54F4967B2C8A6759459248BE8",\n    "subType": "report_datamart",\n    "name": "Customer with certain condition",\n    "destinationFolderId": "8A1831FF494F528D02A4A8BF5FB73459"\n  },\n  "sourceType": "normal",\n  "dataSource": {\n    "dataTemplate": {\n      "units": [\n        {\n          "id": "8D679D3811D3E4981000E787EC6DE8A4",\n          "name": "Country",\n          "type": "attribute"\n        },\n        {\n          "id": "8D679D5211D3E4981000E787EC6DE8A4",\n          "name": "Distribution Center",\n          "type": "attribute"\n        },\n        {\n          "type": "metrics",\n          "elements": [\n            {\n              "id": "7FD5B69611D5AC76C000D98A4CC5F24F",\n              "name": "Cost",\n              "subType": "metric"\n            },\n            {\n              "id": "4C051DB611D3E877C000B3B2D86C964F",\n              "name": "Profit",\n              "subType": "metric"\n            }\n          ]\n        }\n      ]\n    },\n    "filter": {\n      "text": "Cost + 1000 > 10000",\n      "tree": {\n        "type": "predicate_custom",\n        "predicateId": "BC0E8714D18B44279042E690F5733872",\n        "predicateText": "Cost + 1000 > 10000",\n        "predicateTree": {\n          "expression": {\n            "text": "Cost + 1000 > 10000",\n            "tokens": [\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "%",\n                "type": "character"\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "Cost",\n                "type": "object_reference",\n                "target": {\n                  "dateCreated": "2001-09-18T20:56:27.000Z",\n                  "dateModified": "2022-04-19T07:17:07.000Z",\n                  "versionId": "DC6020454F85D040699E20AE5B588A7D",\n                  "acg": 255,\n                  "primaryLocale": "en-US",\n                  "objectId": "7FD5B69611D5AC76C000D98A4CC5F24F",\n                  "subType": "metric",\n                  "name": "Cost"\n                }\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "+",\n                "type": "character",\n                "target": {\n                  "dateCreated": "2001-01-02T20:47:41.000Z",\n                  "dateModified": "2021-02-26T03:18:34.000Z",\n                  "versionId": "21E9227B421DBAD67EA60A929E595E67",\n                  "acg": 255,\n                  "primaryLocale": "en-US",\n                  "objectId": "8107C310DD9911D3B98100C04F2233EA",\n                  "subType": "function",\n                  "name": "+",\n                  "description": "Returns the sum of two values."\n                }\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "1000",\n                "type": "integer"\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": ">",\n                "type": "character",\n                "target": {\n                  "dateCreated": "2001-01-02T20:47:41.000Z",\n                  "dateModified": "2021-02-26T03:18:34.000Z",\n                  "versionId": "A3808F5B4E6620E24102E48D99550BB2",\n                  "acg": 255,\n                  "primaryLocale": "en-US",\n                  "objectId": "8107C317DD9911D3B98100C04F2233EA",\n                  "subType": "function",\n                  "name": ">",\n                  "description": "Returns TRUE if the first value is greater than the second value."\n                }\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "10000",\n                "type": "integer"\n              },\n              {\n                "level": "resolved",\n                "state": "initial",\n                "value": "",\n                "type": "end_of_text"\n              }\n            ]\n          }\n        }\n      }\n    }\n  },\n  "datamartOptions": {\n    "append": true,\n    "targetSource": {\n      "objectId": "62871E84AEBB479C92F81BB075A55910",\n      "subType": "db_role_cloud_element",\n      "name": "Sage One"\n    },\n    "tableName": "!p_adddata_shxu",\n    "placeholderIncluded": true,\n    "datamartProperties": {\n      "[DatamartProperties].[Create Table Post String]": {\n        "name": "Create Table Post String",\n        "value": "create",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Insert SQLs]": {\n        "name": "Insert SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Execution Time]": {\n        "name": "Maximum Execution Time",\n        "value": "11",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Maximum Rows]": {\n        "name": "Maximum Rows",\n        "value": "999999999",\n        "type": "int32",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Post SQLs]": {\n        "name": "Post SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Pre SQLs]": {\n        "name": "Pre SQLs",\n        "value": "select * from dssmdobjinfo",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Descriptor]": {\n        "name": "Table Descriptor",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Option]": {\n        "name": "Table Option",\n        "value": "options",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Prefix]": {\n        "name": "Table Prefix",\n        "value": "test",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Qualifier]": {\n        "name": "Table Qualifier",\n        "value": "a",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Space]": {\n        "name": "Table Space",\n        "value": "shxu",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Table Type]": {\n        "name": "Table Type",\n        "value": "1",\n        "type": "int32",\n        "resolvedLocation": "object"\n      }\n    }\n  }\n}\n')),(0,o.kt)("p",null,"Response Code: 200 (The datamart definition is returned successfully.)"),(0,o.kt)("h2",{id:"retrieve-a-datamart-definition-with-advanced-properties"},"Retrieve a datamart definition with advanced properties"),(0,o.kt)("p",null,"This workflow sample demonstrates how to retrieve the definition of a datamart with advanced properties through the Modeling service."),(0,o.kt)("p",null,"This workflow is similar to Retrieve a Datamart Definition, except with showAdvancedProperties=true using GET /api/model/datamarts/{datamartId}."),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showAdvancedProperties")," is omitted or false, the advanced properties are not returned."),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"showAdvancedProperties")," is true, the advanced properties are are returned."),(0,o.kt)("p",null,"Sample Curl:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/model/datamarts/CEA3C6FC4E6749C8F8B19580D16D2443?showAdvancedProperties=true' \\\n  -H 'accept: application/json' \\\n  -H 'X-MSTR-AuthToken: n64eqd6mi28ma3vp8tmf8b1jdg' \\\n  -H 'X-MSTR-ProjectID: B7CA92F04B9FAE8D941C3E9B7E0CD754'\n")),(0,o.kt)("p",null,"Sample Response Body: You can view the Datamart's definition in the body of the response. Below is an example of filter in \u201ctext\u201c and \u201ctree\u201c formats."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "information": {\n    "dateCreated": "2022-09-08T10:03:46.524Z",\n    "dateModified": "2022-09-08T10:03:46.524Z",\n    "versionId": "53A787E94D62295045F546A0F9F3A8DE",\n    "acg": 255,\n    "primaryLocale": "en-US",\n    "objectId": "E552D3CE48D2FE0ECC1D42BB71B3BD76",\n    "subType": "report_datamart",\n    "name": "DMR advanced properties"\n  },\n  "sourceType": "normal",\n  "dataSource": {\n    "dataTemplate": {\n      "units": [\n        {\n          "id": "8D679D3711D3E4981000E787EC6DE8A4",\n          "name": "Category",\n          "type": "attribute"\n        },\n        {\n          "id": "8D679D4F11D3E4981000E787EC6DE8A4",\n          "name": "Subcategory",\n          "type": "attribute"\n        },\n        {\n          "type": "metrics",\n          "elements": [\n            {\n              "id": "1FAF96994873E7CEFC71BDB269522636",\n              "name": "Profit Forecast",\n              "subType": "metric"\n            }\n          ]\n        }\n      ]\n    },\n    "filter": {}\n  },\n  "datamartOptions": {\n    "append": true,\n    "targetSource": {\n      "objectId": "05AC49F849389A20A6C9C19A3105A69B",\n      "subType": "db_role",\n      "name": "Statistics"\n    },\n    "tableName": "MD_TEST",\n    "placeholderIncluded": true,\n    "datamartProperties": {\n      "[DatamartProperties].[Create Table Post String]": {\n        "name": "Create Table Post String",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "object"\n      },\n      "[DatamartProperties].[Insert SQLs]": {\n        "name": "Insert SQLs",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Maximum Execution Time]": {\n        "name": "Maximum Execution Time",\n        "value": "0",\n        "type": "int32",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Maximum Rows]": {\n        "name": "Maximum Rows",\n        "value": "65536",\n        "type": "int32",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Post SQLs]": {\n        "name": "Post SQLs",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Pre SQLs]": {\n        "name": "Pre SQLs",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Descriptor]": {\n        "name": "Table Descriptor",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Option]": {\n        "name": "Table Option",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Prefix]": {\n        "name": "Table Prefix",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Qualifier]": {\n        "name": "Table Qualifier",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Space]": {\n        "name": "Table Space",\n        "value": "",\n        "type": "string",\n        "resolvedLocation": "default"\n      },\n      "[DatamartProperties].[Table Type]": {\n        "name": "Table Type",\n        "value": "0",\n        "type": "int32",\n        "resolvedLocation": "default"\n      }\n    }\n  },\n  "advancedProperties": {\n    "vldbProperties": {\n      "[AnalyticalEngineProperties].[EvaluationOrdering]": {\n        "name": "EvaluationOrdering",\n        "value": "2",\n        "type": "int32",\n        "resolvedLocation": "report"\n      },\n      "[AnalyticalEngineProperties].[MetricLevelDetermination]": {\n        "name": "MetricLevelDetermination",\n        "value": "false",\n        "type": "boolean",\n        "resolvedLocation": "default"\n      }\n    },\n    "metricJoinTypes": {\n      "1FAF96994873E7CEFC71BDB269522636": {\n        "metric": {\n          "objectId": "1FAF96994873E7CEFC71BDB269522636",\n          "subType": "metric",\n          "name": "Profit Forecast"\n        },\n        "joinType": "inner",\n        "resolvedLocation": "default"\n      }\n    },\n    "attributeJoinTypes": {\n      "8D679D3711D3E4981000E787EC6DE8A4": {\n        "attribute": {\n          "objectId": "8D679D3711D3E4981000E787EC6DE8A4",\n          "subType": "attribute",\n          "name": "Category"\n        },\n        "noParticipationInPreserveRow": false,\n        "resolvedLocation": "default"\n      },\n      "8D679D4F11D3E4981000E787EC6DE8A4": {\n        "attribute": {\n          "objectId": "8D679D4F11D3E4981000E787EC6DE8A4",\n          "subType": "attribute",\n          "name": "Subcategory"\n        },\n        "noParticipationInPreserveRow": false,\n        "resolvedLocation": "default"\n      }\n    },\n    "useDefaultEvaluationOrder": true\n  }\n}\n')),(0,o.kt)("p",null,"Response Code: 200 (The datamart definition is returned successfully.)"))}v.isMDXComponent=!0}}]);