"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[4315],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,h=m["".concat(c,".").concat(u)]||m[u]||d[u]||o;return n?a.createElement(h,l(l({ref:t},s),{},{components:n})):a.createElement(h,l({ref:t},s))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9966:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return c},metadata:function(){return s},toc:function(){return m}});var a,r=n(3117),o=n(102),l=(n(7294),n(3905)),i=["components"],c={title:"Purge object and element caches",description:"This workflow sample demonstrates how to purge object or element cache for a particular project.",sidebar_label:"Purge object and element caches"},p=void 0,s={unversionedId:"common-workflows/manage-caches",id:"common-workflows/manage-caches",title:"Purge object and element caches",description:"This workflow sample demonstrates how to purge object or element cache for a particular project.",source:"@site/docs/common-workflows/manage-caches.md",sourceDirName:"common-workflows",slug:"/common-workflows/manage-caches",permalink:"/rest-api-docs/common-workflows/manage-caches",draft:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/manage-caches.md",tags:[],version:"current",lastUpdatedBy:"magua-io",lastUpdatedAt:1672953042,formattedLastUpdatedAt:"Jan 5, 2023",frontMatter:{title:"Purge object and element caches",description:"This workflow sample demonstrates how to purge object or element cache for a particular project.",sidebar_label:"Purge object and element caches"},sidebar:"tutorialSidebar",previous:{title:"Manage language objects",permalink:"/rest-api-docs/common-workflows/manage-languages"},next:{title:"Manage prompt objects",permalink:"/rest-api-docs/common-workflows/manage-prompt-objects/"}},d={},m=[{value:"API",id:"api",level:2},{value:"Header",id:"header",level:3},{value:"Path parameters",id:"path-parameters",level:3},{value:"Workflow",id:"workflow",level:2},{value:"Step 1 \u2013 Getting project id",id:"step-1--getting-project-id",level:3},{value:"Step 2 \u2013 Deleting the cache",id:"step-2--deleting-the-cache",level:3},{value:"Responses",id:"responses",level:2}],u=(a="Available",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",e)}),h={toc:m};function k(e){var t=e.components,n=(0,o.Z)(e,i);return(0,l.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(u,{since:"2021 Update 8",mdxType:"Available"}),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"You can try out these workflows at ",(0,l.kt)("a",{parentName:"p",href:"https://www.postman.com/microstrategysdk/workspace/microstrategy-rest-api/folder/16131298-7238f434-a209-45b1-a227-cba9887c20b4?ctx=documentation"},"REST API Playground"),"."),(0,l.kt)("p",{parentName:"admonition"},"Learn more about MicroStrategy REST API Playground ",(0,l.kt)("a",{parentName:"p",href:"/rest-api-docs/getting-started/playground"},"here"),".")),(0,l.kt)("p",null,"When a user works with MicroStrategy, cache data is created. The data stored in the cache allows to increase system performance and improve user\u2019s experience. Instead of loading the data required by system from some database, i.e., meta-data database, the data is retrieved from a cache memory. However, Platform Administrator or Analytics Architect may decide to purge the caches periodically. Currently, the REST API allows to delete cache data for objects and elements using a following endpoint:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"DELETE /api/monitors/projects/{projectId}/cache/{cacheType}"))),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("p",null,"The sections below present Cache Management REST API usage."),(0,l.kt)("h3",{id:"header"},"Header"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"X-MSTR-AuthToken"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"(Required) MicroStrategy authorization token."),(0,l.kt)("li",{parentName:"ul"},"Data Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"string")),(0,l.kt)("li",{parentName:"ul"},"Allowable Values: valid authorization token.")))),(0,l.kt)("h3",{id:"path-parameters"},"Path parameters"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"projectId"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"(Required) Unique project identifier."),(0,l.kt)("li",{parentName:"ul"},"Data Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"string")),(0,l.kt)("li",{parentName:"ul"},"Allowable Values: project identifier (GUID)"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cacheType"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"(Required) Determines whether object or element cache data is deleted."),(0,l.kt)("li",{parentName:"ul"},"Data Type: ",(0,l.kt)("inlineCode",{parentName:"li"},"string")),(0,l.kt)("li",{parentName:"ul"},'Allowable Values: "element" or "object"')))),(0,l.kt)("h2",{id:"workflow"},"Workflow"),(0,l.kt)("p",null,"There are two steps which you need to take to delete cache for objects and elements. The steps are described in this section."),(0,l.kt)("h3",{id:"step-1--getting-project-id"},"Step 1 \u2013 Getting project id"),(0,l.kt)("p",null,"The purpose of the first step is to determine project ",(0,l.kt)("inlineCode",{parentName:"p"},"id"),". The ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," identifies the project for which we want to clear the cache. We can use a following endpoint to list all loaded projects with their ids."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"GET /projects")),(0,l.kt)("p",null,"You can call the endpoint using for example curl command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'GET' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/projects' \\\n  -H 'accept: application/json' \\\n  -H 'X-MSTR-AuthToken: m0pjr6ec9lemv0m8782hd8hg48'\n\n")),(0,l.kt)("p",null,"The X-MSTR-AuthToken is an authentication token which you receive during authentication process. The correct response of the endpoint should look like:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "acg": 255,\n    "id": "B7CA92F04B9FAE8D941C3E9B7E0CD754",\n    "name": "MicroStrategy Tutorial",\n    "status": 0,\n    "alias": "",\n    "description": "MicroStrategy Tutorial project and application set designed to illustrate the platform\'s rich functionality. The theme is an Electronics, Books, Movies and Music store. Employees, Inventory, Finance, Product Sales and Suppliers are analyzed.",\n    "dateCreated": "2015-06-30T21:55:35.000+0000",\n    "dateModified": "2022-06-25T12:48:15.000+0000",\n    "owner": {\n      "name": "Administrator",\n      "id": "54F3D26011D2896560009A8E67019608"\n    }\n  },\n  {\n    "acg": 255,\n    "id": "CE52831411E696C8BD2F0080EFD5AF44",\n    "name": "Consolidated Education Project",\n    "status": 0,\n    "alias": "",\n    "description": "",\n    "dateCreated": "2016-11-20T16:39:48.000+0000",\n    "dateModified": "2022-06-25T12:46:22.000+0000",\n    "owner": {\n      "name": "Administrator",\n      "id": "54F3D26011D2896560009A8E67019608"\n    }\n  }\n  ...\n]\n')),(0,l.kt)("p",null,"Please find the ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," for the desired project. For example, ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," of the project: \u201cMicroStrategy Tutorial\u201d is ",(0,l.kt)("inlineCode",{parentName:"p"},"B7CA92F04B9FAE8D941C3E9B7E0CD75"),". We will use it in the next step."),(0,l.kt)("h3",{id:"step-2--deleting-the-cache"},"Step 2 \u2013 Deleting the cache"),(0,l.kt)("p",null,"You need to invoke a following endpoint to delete the cache:"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"DELETE api/monitors/projects/{projectId}/cache/{cacheType}")),(0,l.kt)("p",null,"The endpoint path consists of ",(0,l.kt)("inlineCode",{parentName:"p"},"projectId")," parameter, so you need to replace the placeholder by the ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," value. The last placeholder determines cache type which will be purged. The allowable values are following ",(0,l.kt)("inlineCode",{parentName:"p"},"element")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"cache"),". The example below demonstrates how to call the end point using curl command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X 'DELETE' \\\n  'https://demo.microstrategy.com/MicroStrategyLibrary/api/monitors/projects/B7CA92F04B9FAE8D941C3E9B7E0CD754/cache/element' \\\n  -H 'accept: */*' \\\n  -H 'X-MSTR-AuthToken: m0pjr6ec9lemv0m8782hd8hg48'\n")),(0,l.kt)("p",null,"The endpoint should return: ",(0,l.kt)("inlineCode",{parentName:"p"},"204 No Content"),"."),(0,l.kt)("h2",{id:"responses"},"Responses"),(0,l.kt)("p",null,"The default response is ",(0,l.kt)("inlineCode",{parentName:"p"},"204 No Content")," which notifies that the cache purge was triggered. The endpoint can also return another response codes. The codes are listed below."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Invalid Input / Error"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"HTTP Response Code"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Unauthorized access"),(0,l.kt)("td",{parentName:"tr",align:null},"Invalid Access Token"),(0,l.kt)("td",{parentName:"tr",align:null},"401")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Invalid projectId"),(0,l.kt)("td",{parentName:"tr",align:null},"The given Project ID (projectId) does not exist"),(0,l.kt)("td",{parentName:"tr",align:null},"400")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Invalid cache type"),(0,l.kt)("td",{parentName:"tr",align:null},"The cache type has to be element or object"),(0,l.kt)("td",{parentName:"tr",align:null},"400")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Internal Server Error"),(0,l.kt)("td",{parentName:"tr",align:null},"Internal Server Error Cause"),(0,l.kt)("td",{parentName:"tr",align:null},"500")))))}k.isMDXComponent=!0}}]);