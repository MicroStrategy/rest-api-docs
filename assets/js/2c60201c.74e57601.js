"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[2560],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return g}});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=a.createContext({}),d=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},l=function(e){var n=d(e.components);return a.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(t),g=i,m=u["".concat(p,".").concat(g)]||u[g]||c[g]||o;return t?a.createElement(m,r(r({ref:n},l),{},{components:t})):a.createElement(m,r({ref:n},l))}));function g(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,r=new Array(o);r[0]=u;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var d=2;d<o;d++)r[d]=t[d];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},93085:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return d},default:function(){return E},frontMatter:function(){return p},metadata:function(){return l},toc:function(){return u}});var a,i=t(83117),o=t(80102),r=(t(67294),t(3905)),s=["components"],p={title:"Edit migrations and migration groups",description:"You can edit migration and migration group before importing."},d=void 0,l={unversionedId:"common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups",id:"common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups",title:"Edit migrations and migration groups",description:"You can edit migration and migration group before importing.",source:"@site/docs/common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups.md",sourceDirName:"common-workflows/administration/migrations/migrations-in-workstation",slug:"/common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups",permalink:"/rest-api-docs/common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups",draft:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/administration/migrations/migrations-in-workstation/edit-migrations-and-migration-groups.md",tags:[],version:"current",lastUpdatedBy:"elinmstr",lastUpdatedAt:1685725225,formattedLastUpdatedAt:"Jun 2, 2023",frontMatter:{title:"Edit migrations and migration groups",description:"You can edit migration and migration group before importing."},sidebar:"tutorialSidebar",previous:{title:"Upload and download migration packages",permalink:"/rest-api-docs/common-workflows/administration/migrations/migrations-in-workstation/upload-and-download-migration-packages"},next:{title:"Create and import migration packages",permalink:"/rest-api-docs/common-workflows/administration/migrations/create-and-import-migration-packages/"}},c={},u=[{value:"APIs",id:"apis",level:2},{value:"Privileges and authorization",id:"privileges-and-authorization",level:2},{value:"Use scenarios",id:"use-scenarios",level:2},{value:"Edit Migrations",id:"edit-migrations",level:2},{value:"1. Get the full content of the migration",id:"1-get-the-full-content-of-the-migration",level:3},{value:"Step 2: Edit the migration package info",id:"step-2-edit-the-migration-package-info",level:3},{value:"3. Get the edit status of the migration",id:"3-get-the-edit-status-of-the-migration",level:3},{value:"Edit migration groups",id:"edit-migration-groups",level:2},{value:"1. Get migration group content",id:"1-get-migration-group-content",level:3},{value:"Step 2: Edit the migration group",id:"step-2-edit-the-migration-group",level:3},{value:"Step 3: Get the edit status of the migration group",id:"step-3-get-the-edit-status-of-the-migration-group",level:3},{value:"Performance",id:"performance",level:2},{value:"Compatibility",id:"compatibility",level:2},{value:"Suggestions",id:"suggestions",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}],g=(a="Available",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)}),m={toc:u};function E(e){var n=e.components,t=(0,o.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)(g,{since:"2021 Update 9",mdxType:"Available"}),(0,r.kt)("p",null,"Starting in MicroStrategy 2021 Update 9, you can edit migrations and migration groups before importing. You can edit the names of migrations or migration groups and the objects within them, but not their type or purpose. You can edit migrations and migration groups for all types and purposes, except for uploaded migrations. However, you must pay attention to a migration's package and import statuses. You cannot edit migrations with a package status of 'creating' or 'locked'. You also cannot edit migrations with an import status of 'approved' or 'requested'. As expected, a migration group containing such a migration also cannot be edited."),(0,r.kt)("h2",{id:"apis"},"APIs"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migrations/editMigration"},"PUT /api/migrations/{migrationId}/packageInfo")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migration%20Groups/triggerImport"},"PUT /api/migrationGroups/{migrationGroupId}"))),(0,r.kt)("h2",{id:"privileges-and-authorization"},"Privileges and authorization"),(0,r.kt)("p",null,"Only Architect users can validate migrations. An Architect must have the following privileges:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create package")),(0,r.kt)("p",null,"To execute the API, you must get the authorization token by executing the ",(0,r.kt)("inlineCode",{parentName:"p"},"POST /api/auth/login request"),", and get a ",(0,r.kt)("inlineCode",{parentName:"p"},'"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9"')," token in the response body. Keep the token value. See ",(0,r.kt)("a",{parentName:"p",href:"/rest-api-docs/getting-started/authentication"},"Authentication")," for more information."),(0,r.kt)("h2",{id:"use-scenarios"},"Use scenarios"),(0,r.kt)("p",null,"The best practice scenario is when Workstation uses one Library server as a source and another Library server as a target. The source and target environments can be the same."),(0,r.kt)("p",null,"You can only edit the package before it is migrated. This means the package status must be ",(0,r.kt)("inlineCode",{parentName:"p"},"created")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"created_failed")," and the import status of the migration must be ",(0,r.kt)("inlineCode",{parentName:"p"},"pending")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"rejected"),". You must edit the migration in the source environment."),(0,r.kt)("h2",{id:"edit-migrations"},"Edit Migrations"),(0,r.kt)("h3",{id:"1-get-the-full-content-of-the-migration"},"1. Get the full content of the migration"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migrations/getMigrationList"},(0,r.kt)("inlineCode",{parentName:"a"},"GET /api/migrations/{migrationId}?showContent=all"))),(0,r.kt)("p",null,"This call gets the full content of the migration to prepare it for editing. Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"showContent=all")," query parameter, to can get ",(0,r.kt)("inlineCode",{parentName:"p"},"tocView")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"treeView"),". Save ",(0,r.kt)("inlineCode",{parentName:"p"},"packageInfo")," in the response body and use it for the next step."),(0,r.kt)("p",null,"Sample Request Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'"Content-Type": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9" // authtoken from Authorization response.\n')),(0,r.kt)("p",null,"Sample Response Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "09ADA2DD251F4927A442451C0100EA16:EA55B5338588411689E838FEC3A8EAA3",\n  "packageInfo": {\n    "id": "09ADA2DD251F4927A442451C0100EA16",\n    "name": "object_migration_test",\n    "replicated": false,\n    "type": "project",\n    "lastUpdatedDate": "2023-03-07T08:50:59.527+0000",\n    "creator": {\n      "id": "54F3D26011D2896560009A8E67019608",\n      "name": "Administrator"\n    },\n    "creationDate": "2023-03-07T08:50:33.267+0000",\n    "environment": {\n      "id": "sss_project_package_id",\n      "name": "sss project package name"\n    },\n    "storage": {\n      "size": 703230,\n      "path": "mstr/shared/migrations/packages/2023-03-07/9DDDCDEF8A334FBAA98E47E0E8300CF9.mmp"\n    },\n    "project": {\n      "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n      "name": "MicroStrategy Tutorial"\n    },\n    "status": "created",\n    "message": "",\n    "progress": 100.0,\n    "deleted": false,\n    "existing": true,\n    "tocView": {\n      "settings": {\n        "updateSchema": ["recal_table_logical_size"],\n        "aclOnReplacingObjects": "replace",\n        "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n        "defaultAction": "keep_both"\n      },\n      "content": [\n        {\n          "id": "0DFE6FB4356F4FA2A0C1C10D0B415355",\n          "name": "Add",\n          "version": "1F348F3E11EB7C9D8F150080EF651EEA",\n          "type": 11,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2008-12-22T14:51:20.000+0000",\n          "dateModified": "2021-03-04T03:53:04.000+0000",\n          "action": "force_replace",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "8D679D3711D3E4981000E787EC6DE8A4",\n          "name": "Category",\n          "version": "21D7619E11EB7C9D8F150080EF753EEA",\n          "type": 12,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2001-01-02T20:48:11.000+0000",\n          "dateModified": "2021-03-04T03:53:08.000+0000",\n          "action": "use_newer",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "D8EE8AEC11E794390FF00080EF053519",\n          "name": "DossierTest",\n          "version": "62D8E88A11EB7CA13A550080EFC5563B",\n          "type": 55,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2017-09-08T02:03:03.000+0000",\n          "dateModified": "2021-03-04T04:23:35.000+0000",\n          "action": "use_existing",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "1334ECBB11E78F4D109F0080EFD55D0D",\n          "name": "SaveAsDocumentTest",\n          "version": "6283BF7211EB7CA13A950080EFE5963B",\n          "type": 55,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2017-09-01T19:38:06.000+0000",\n          "dateModified": "2021-03-04T04:23:35.000+0000",\n          "action": "use_existing",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "811B7AEB11EB53EF4E920080EFE51106",\n          "name": "ReportDataSource",\n          "version": "2CE7AC0F11EB7CA92C0E0080EF455F4D",\n          "type": 3,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2021-01-11T09:29:29.000+0000",\n          "dateModified": "2021-03-04T05:19:21.000+0000",\n          "action": "replace",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "8BC2E91D4AA8E9A14E7FBAB740B5B932",\n          "name": "MD partition",\n          "version": "22C4810411EB7C9D8F150080EF753EEA",\n          "type": 15,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2012-12-26T03:44:12.000+0000",\n          "dateModified": "2021-03-04T03:53:10.000+0000",\n          "action": "use_existing",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "F0B5CE694B42895AC7EE4C81433BD6D3",\n          "name": "Cost Target",\n          "version": "230C4E6C11EB7C9D8F150080EF651EEA",\n          "type": 13,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2009-02-16T10:17:19.000+0000",\n          "dateModified": "2021-03-04T03:53:10.000+0000",\n          "action": "use_older",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        },\n        {\n          "id": "0451E0F3418DEDB7468C7F94D59E231D",\n          "name": "Choose Custom Group",\n          "version": "C38F6AE011EB7CA2A3000080EF9572D2",\n          "type": 10,\n          "owner": {\n            "id": "54F3D26011D2896560009A8E67019608"\n          },\n          "dateCreated": "2006-06-30T11:42:27.000+0000",\n          "dateModified": "2021-03-04T04:33:27.000+0000",\n          "action": "delete",\n          "includeDependents": false,\n          "explicitIncluded": true,\n          "level": "project_object"\n        }\n      ]\n    },\n    "purpose": "object_migration",\n    "treeView": "{\\"treeViewType\\":\\"project\\",\\"treeViewSettings\\":{\\"updateSchema\\":[],\\"aclOnReplacingObjects\\":\\"use_existing\\",\\"aclOnNewObjects\\":[\\"keep_acl_as_source_object\\"],\\"defaultAction\\":\\"force_replace\\"},\\"treeViewContent\\":[{\\"id\\":\\"D8EE8AEC11E794390FF00080EF053519\\",\\"type\\":55,\\"action\\":\\"use_existing\\",\\"includeDependents\\":null},{\\"id\\":\\"811B7AEB11EB53EF4E920080EFE51106\\",\\"name\\":null,\\"type\\":3,\\"action\\":\\"replace\\"}]}"\n  },\n  "importInfo": {\n    "id": "EA55B5338588411689E838FEC3A8EAA3",\n    "creator": {},\n    "creationDate": "2023-03-07T08:50:33.268+0000",\n    "lastUpdatedDate": "2023-03-07T08:50:33.268+0000",\n    "environment": {\n      "id": "sss_project_package_id",\n      "name": "sss_project_import_name"\n    },\n    "status": "pending",\n    "importRequestStatus": "pending",\n    "undoRequestStatus": "pending",\n    "progress": 0.0,\n    "message": "",\n    "undoStorage": {},\n    "project": {\n      "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n      "name": "name"\n    },\n    "deleted": false\n  },\n  "version": "2"\n}\n')),(0,r.kt)("h3",{id:"step-2-edit-the-migration-package-info"},"Step 2: Edit the migration package info"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migrations/editMigration"},"PUT /api/migrations/{migrationId}/packageInfo")),(0,r.kt)("p",null,"This call triggers migration editing in Library. This API can only be called by an Architect user when the package status of the migration is ",(0,r.kt)("inlineCode",{parentName:"p"},"created")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"created_failed")," and the import status of the migration is ",(0,r.kt)("inlineCode",{parentName:"p"},"pending")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"rejected"),"."),(0,r.kt)("p",null,"Sample Request Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'"Content-Type": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9" // authtoken from Authorization response.\n"prefer": "respond-async"\n')),(0,r.kt)("p",null,"All required fields are in ",(0,r.kt)("inlineCode",{parentName:"p"},"packageInfo"),", which is in the response body that you saved in step 1. You cannot modify the values \u200b\u200bof ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"purpose"),", but you can modify ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", and the content of ",(0,r.kt)("inlineCode",{parentName:"p"},"tocView")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"treeView")," as needed."),(0,r.kt)("p",null,"Sample Request Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "project",\n  "name": "Object_Migration_edit",\n  "tocView": {\n    "settings": {\n      "updateSchema": ["recal_table_logical_size"],\n      "aclOnReplacingObjects": "replace",\n      "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n      "defaultAction": "keep_both"\n    },\n    "content": [\n      {\n        "id": "1334ECBB11E78F4D109F0080EFD55D0D",\n        "name": "SaveAsDocumentTest",\n        "type": 55,\n        "action": "use_existing",\n        "includeDependents": false\n      },\n      {\n        "id": "8D679D3711D3E4981000E787EC6DE8A4",\n        "name": "Category",\n        "type": 12,\n        "action": "use_newer",\n        "includeDependents": false\n      },\n      {\n        "id": "F0B5CE694B42895AC7EE4C81433BD6D3",\n        "name": "Cost Target",\n        "type": 13,\n        "action": "use_older",\n        "includeDependents": false\n      },\n      {\n        "id": "0DFE6FB4356F4FA2A0C1C10D0B415355",\n        "name": "Add",\n        "type": 11,\n        "action": "force_replace",\n        "includeDependents": false\n      },\n      {\n        "id": "0451E0F3418DEDB7468C7F94D59E231D",\n        "name": "Choose Custom Group",\n        "type": 10,\n        "action": "delete",\n        "includeDependents": false\n      },\n      {\n        "id": "8BC2E91D4AA8E9A14E7FBAB740B5B932",\n        "name": "MD partition",\n        "type": 15,\n        "action": "use_existing",\n        "includeDependents": false\n      }\n    ]\n  },\n  "treeView": {\n    "treeViewType": "project",\n    "treeViewSettings": {\n      "updateSchema": [],\n      "aclOnReplacingObjects": "use_existing",\n      "aclOnNewObjects": ["keep_acl_as_source_object"],\n      "defaultAction": "force_replace"\n    },\n    "treeViewContent": [\n      {\n        "id": "D8EE8AEC11E794390FF00080EF053519",\n        "type": 55,\n        "action": "use_existing",\n        "includeDependents": null\n      },\n      {\n        "id": "811B7AEB11EB53EF4E920080EFE51106",\n        "name": null,\n        "type": 3,\n        "action": "replace"\n      }\n    ]\n  }\n}\n')),(0,r.kt)("p",null,"Sample Response Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "335B6F5DFA7847769F12E88E868EB103",\n  "status": "creating",\n  "progress": 0.0\n}\n')),(0,r.kt)("h3",{id:"3-get-the-edit-status-of-the-migration"},"3. Get the edit status of the migration"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migrations/getMigration"},"GET /api/migrations/{migrationId}")),(0,r.kt)("p",null,"Since package editing is an asynchronous process, this call checks the creation status, which is usually ",(0,r.kt)("inlineCode",{parentName:"p"},"creating"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"created"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"create_failed"),"."),(0,r.kt)("p",null,"Repeat this step until you get ",(0,r.kt)("inlineCode",{parentName:"p"},"packageInfo")," as ",(0,r.kt)("inlineCode",{parentName:"p"},'"status": "created"'),"."),(0,r.kt)("p",null,"Sample Request Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'"Content-Type": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9"  // auth token from Authorization response.\n')),(0,r.kt)("p",null,"Sample Response Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "652323369FB24BC1BDCEE7DF4F674FA5:E00475B02F6A40ABB135B4A026B9BA75",\n  "packageInfo": {\n    "id": "652323369FB24BC1BDCEE7DF4F674FA5",\n    "name": "Object_Migration_edit",\n    "replicated": false,\n    "type": "project",\n    "lastUpdatedDate": "2023-03-08T09:49:39.893+0000",\n    "creator": {\n      "id": "54F3D26011D2896560009A8E67019608",\n      "name": "Administrator"\n    },\n    "creationDate": "2023-03-08T09:48:50.325+0000",\n    "environment": {\n      "id": "sss_project_package_id",\n      "name": "sss project package name"\n    },\n    "storage": {},\n    "project": {\n      "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n      "name": "MicroStrategy Tutorial"\n    },\n    "status": "creating",\n    "message": "",\n    "progress": 0.0,\n    "deleted": false,\n    "existing": true,\n    "purpose": "object_migration"\n  },\n  "importInfo": {\n    "id": "E00475B02F6A40ABB135B4A026B9BA75",\n    "creator": {},\n    "creationDate": "2023-03-08T09:48:50.325+0000",\n    "lastUpdatedDate": "2023-03-08T09:48:50.325+0000",\n    "environment": {\n      "id": "sss_project_package_id",\n      "name": "sss_project_import_name"\n    },\n    "status": "pending",\n    "importRequestStatus": "pending",\n    "undoRequestStatus": "pending",\n    "progress": 0.0,\n    "message": "",\n    "undoStorage": {},\n    "project": {\n      "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n      "name": "name"\n    },\n    "deleted": false\n  },\n  "version": "2"\n}\n')),(0,r.kt)("h2",{id:"edit-migration-groups"},"Edit migration groups"),(0,r.kt)("h3",{id:"1-get-migration-group-content"},"1. Get migration group content"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migration%20Groups/getMigrationGroup"},"GET /api/migrationGroups/{{migrationGroupId}}?showContent=all")),(0,r.kt)("p",null,"This call gets the full content of the migration groups to prepare the import call."),(0,r.kt)("p",null,"Save the response body and use it for the next step."),(0,r.kt)("p",null,"Sample Response Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "11C09927B0B748A6970AE958CBD44FCE:FB6A954D2AB14BB09E2F98B72E634224",\n  "name": "test_migrationGroup",\n  "sourceEnvironment": {\n    "id": "environment_url_src",\n    "name": "environment_src"\n  },\n  "targetEnvironment": {\n    "id": "environment_url_tar",\n    "name": "environment_tar"\n  },\n  "treeView": "{}",\n  "importRequestStatus": "approved",\n  "undoRequestStatus": "pending",\n  "creationDate": "2022-09-08T06:47:19.599+0000",\n  "lastUpdatedDate": "2022-09-08T06:50:56.718+0000",\n  "migrations": [\n    {\n      "id": "ACEE65A19AD34FA38200A3D59BA879A9:0AE4FFDD4289481084005D39EF516FB4",\n      "packageInfo": {\n        "id": "ACEE65A19AD34FA38200A3D59BA879A9",\n        "groupId": "11C09927B0B748A6970AE958CBD44FCE",\n        "name": "test_migrationGroup",\n        "replicated": false,\n        "purpose": "migration_group",\n        "type": "configuration",\n        "creator": {\n          "id": "54F3D26011D2896560009A8E67019608",\n          "name": "Administrator"\n        },\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:50:56.716+0000",\n        "storage": {\n          "size": 3006,\n          "path": "mstr/shared/migrations/packages/2022-09-08/5C3AEA3CFBF349559C25C41903F36048.mmp"\n        },\n        "project": {},\n        "status": "locked",\n        "message": "",\n        "progress": 100.0,\n        "deleted": false,\n        "existing": true,\n        "tocView": {\n          "settings": {\n            "updateSchema": [],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "989875724CB91A7EC2E365BD0228EB50",\n              "name": "User_Korean",\n              "version": "385DE21942CBD4AD3BFED28070A54C7E",\n              "type": 34,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2008-12-23T09:17:03.000+0000",\n              "dateModified": "2017-04-11T20:16:37.000+0000",\n              "action": "use_existing",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "configuration_object"\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "id": "0AE4FFDD4289481084005D39EF516FB4",\n        "groupId": "FB6A954D2AB14BB09E2F98B72E634224",\n        "creator": {},\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:50:56.717+0000",\n        "status": "pending",\n        "progress": 0.0,\n        "message": "",\n        "undoStorage": {},\n        "project": {},\n        "deleted": false\n      }\n    },\n    {\n      "id": "61794A98597D45B684BB9C711295BB9B:597576B451BB46CFBDD29FB71EC5CC98",\n      "packageInfo": {\n        "id": "61794A98597D45B684BB9C711295BB9B",\n        "groupId": "11C09927B0B748A6970AE958CBD44FCE",\n        "name": "test_migrationGroup",\n        "replicated": false,\n        "purpose": "migration_group_child",\n        "type": "project",\n        "creator": {\n          "id": "54F3D26011D2896560009A8E67019608",\n          "name": "Administrator"\n        },\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:50:56.717+0000",\n        "storage": {\n          "size": 130139,\n          "path": "mstr/shared/migrations/packages/2022-09-08/B0D001993B754E569C9E4FE6C3879EA3.mmp"\n        },\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "Category"\n        },\n        "status": "locked",\n        "message": "",\n        "progress": 100.0,\n        "deleted": false,\n        "existing": true,\n        "tocView": {\n          "settings": {\n            "updateSchema": ["recal_table_logical_size"],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "0DFE6FB4356F4FA2A0C1C10D0B415355",\n              "name": "Add",\n              "version": "1F348F3E11EB7C9D8F150080EF651EEA",\n              "type": 11,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2008-12-22T14:51:20.000+0000",\n              "dateModified": "2022-09-05T04:36:32.000+0000",\n              "action": "force_replace",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "project_object"\n            },\n            {\n              "id": "1334ECBB11E78F4D109F0080EFD55D0D",\n              "name": "SaveAsDocumentTest",\n              "version": "6283BF7211EB7CA13A950080EFE5963B",\n              "type": 55,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2017-09-01T19:38:06.000+0000",\n              "dateModified": "2021-03-04T04:23:35.000+0000",\n              "action": "use_existing",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "project_object"\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "id": "597576B451BB46CFBDD29FB71EC5CC98",\n        "groupId": "FB6A954D2AB14BB09E2F98B72E634224",\n        "creator": {},\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:50:56.718+0000",\n        "status": "pending",\n        "progress": 0.0,\n        "message": "",\n        "undoStorage": {},\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "name"\n        },\n        "deleted": false\n      }\n    }\n  ],\n  "version": "1"\n}\n')),(0,r.kt)("h3",{id:"step-2-edit-the-migration-group"},"Step 2: Edit the migration group"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migration%20Groups/triggerImport"},"PUT /api/migrationGroups/{{migrationGroupId}}")),(0,r.kt)("p",null,"This call triggers migration group editing in Library."),(0,r.kt)("p",null,"Sample Request Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'"Content-Type": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9"  // auth token from Authorization response.\n"prefer": "respond-async"\n')),(0,r.kt)("p",null,"Sample Request Body:"),(0,r.kt)("p",null,"Use the response body you saved in step 1 and change ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"treeView"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"migrations")," as needed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "MultiPackageMultiProject_edit",\n  "treeView": {},\n  "migrations": [\n    {\n      "packageInfo": {\n        "type": "project",\n        "purpose": "migration_group",\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "MicroStrategy Tutorial"\n        },\n        "tocView": {\n          "settings": {\n            "updateSchema": ["recal_table_logical_size"],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "D8EE8AEC11E794390FF00080EF053519",\n              "type": 55,\n              "action": "use_existing",\n              "includeDependents": true\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "MicroStrategy Tutorial"\n        }\n      }\n    },\n    {\n      "packageInfo": {\n        "type": "project",\n        "purpose": "migration_group",\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "MicroStrategy Tutorial"\n        },\n        "tocView": {\n          "settings": {\n            "updateSchema": ["recal_table_logical_size"],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "D8EE8AEC11E794390FF00080EF053519",\n              "type": 55,\n              "action": "use_existing",\n              "includeDependents": true\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "MicroStrategy Tutorial"\n        }\n      }\n    },\n    {\n      "packageInfo": {\n        "type": "project",\n        "purpose": "migration_group",\n        "project": {\n          "id": "E8D198774597EEDA4848F4962AC42A01",\n          "name": "Testing3"\n        },\n        "tocView": {\n          "settings": {\n            "updateSchema": ["recal_table_logical_size"],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "233AE5EF48F48E84B4626D8E0E8806DE",\n              "type": 55,\n              "action": "use_existing",\n              "includeDependents": false\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "project": {\n          "id": "E8D198774597EEDA4848F4962AC42A01",\n          "name": "Testing3"\n        }\n      }\n    }\n  ]\n}\n')),(0,r.kt)("h3",{id:"step-3-get-the-edit-status-of-the-migration-group"},"Step 3: Get the edit status of the migration group"),(0,r.kt)("p",null,"Endpoint: ",(0,r.kt)("a",{parentName:"p",href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Migration%20Groups/getMigrationGroup"},"GET /api/migrationGroups/{{migrationGroupId}}?showContent=all")),(0,r.kt)("p",null,"Since package group editing is an asynchronous process, this call checks the creation status, which is usually ",(0,r.kt)("inlineCode",{parentName:"p"},"empty"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"locked"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"creating"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"created"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"create_failed"),". Apply a 'fail fast' strategy in handling package group creation. This means that if the creation of a package fails, the entire package group creation fails."),(0,r.kt)("p",null,"Repeat this step until you get ",(0,r.kt)("inlineCode",{parentName:"p"},"migrations[*].packageInfo.status")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"created")," for all package migrations."),(0,r.kt)("p",null,"If you find that the status of one package is ",(0,r.kt)("inlineCode",{parentName:"p"},"creating")," and other packages have a status of ",(0,r.kt)("inlineCode",{parentName:"p"},"empty")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"created"),", the migration group is still being edited, so you can continue to repeat this step. If you find a package with a status of ",(0,r.kt)("inlineCode",{parentName:"p"},"create_failed"),", this means the migration group failed to be edited and you can choose to return to the step 2 and edit the migration group again."),(0,r.kt)("p",null,"Sample Request Header:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},'"Content-Type": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9"  // auth token from Authorization response.\n')),(0,r.kt)("p",null,"Sample Response Body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "11C09927B0B748A6970AE958CBD44FCE:FB6A954D2AB14BB09E2F98B72E634224",\n  "name": "test_migrationGroup",\n  "sourceEnvironment": {\n    "id": "environment_url_src",\n    "name": "environment_src"\n  },\n  "targetEnvironment": {\n    "id": "environment_url_tar",\n    "name": "environment_tar"\n  },\n  "treeView": "{}",\n  "importRequestStatus": "pending",\n  "undoRequestStatus": "pending",\n  "creationDate": "2022-09-08T06:47:19.599+0000",\n  "lastUpdatedDate": "2022-09-08T06:47:41.426+0000",\n  "migrations": [\n    {\n      "id": "ACEE65A19AD34FA38200A3D59BA879A9:0AE4FFDD4289481084005D39EF516FB4",\n      "packageInfo": {\n        "id": "ACEE65A19AD34FA38200A3D59BA879A9",\n        "groupId": "11C09927B0B748A6970AE958CBD44FCE",\n        "name": "test_migrationGroup",\n        "replicated": false,\n        "purpose": "migration_group",\n        "type": "configuration",\n        "creator": {\n          "id": "54F3D26011D2896560009A8E67019608",\n          "name": "Administrator"\n        },\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:47:28.144+0000",\n        "storage": {\n          "size": 3006,\n          "path": "mstr/shared/migrations/packages/2022-09-08/5C3AEA3CFBF349559C25C41903F36048.mmp"\n        },\n        "project": {},\n        "status": "created",\n        "message": "",\n        "progress": 100.0,\n        "deleted": false,\n        "existing": true,\n        "tocView": {\n          "settings": {\n            "updateSchema": [],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "989875724CB91A7EC2E365BD0228EB50",\n              "name": "User_Korean",\n              "version": "385DE21942CBD4AD3BFED28070A54C7E",\n              "type": 34,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2008-12-23T09:17:03.000+0000",\n              "dateModified": "2017-04-11T20:16:37.000+0000",\n              "action": "use_existing",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "configuration_object"\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "id": "0AE4FFDD4289481084005D39EF516FB4",\n        "groupId": "FB6A954D2AB14BB09E2F98B72E634224",\n        "creator": {},\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:47:19.599+0000",\n        "status": "pending",\n        "progress": 0.0,\n        "message": "",\n        "undoStorage": {},\n        "project": {},\n        "deleted": false\n      }\n    },\n    {\n      "id": "61794A98597D45B684BB9C711295BB9B:597576B451BB46CFBDD29FB71EC5CC98",\n      "packageInfo": {\n        "id": "61794A98597D45B684BB9C711295BB9B",\n        "groupId": "11C09927B0B748A6970AE958CBD44FCE",\n        "name": "test_migrationGroup",\n        "replicated": false,\n        "purpose": "migration_group_child",\n        "type": "project",\n        "creator": {\n          "id": "54F3D26011D2896560009A8E67019608",\n          "name": "Administrator"\n        },\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:47:41.426+0000",\n        "storage": {\n          "size": 130139,\n          "path": "mstr/shared/migrations/packages/2022-09-08/B0D001993B754E569C9E4FE6C3879EA3.mmp"\n        },\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "Category"\n        },\n        "status": "created",\n        "message": "",\n        "progress": 100.0,\n        "deleted": false,\n        "existing": true,\n        "tocView": {\n          "settings": {\n            "updateSchema": ["recal_table_logical_size"],\n            "aclOnReplacingObjects": "replace",\n            "aclOnNewObjects": ["inherit_acl_as_dest_folder"],\n            "defaultAction": "keep_both"\n          },\n          "content": [\n            {\n              "id": "0DFE6FB4356F4FA2A0C1C10D0B415355",\n              "name": "Add",\n              "version": "1F348F3E11EB7C9D8F150080EF651EEA",\n              "type": 11,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2008-12-22T14:51:20.000+0000",\n              "dateModified": "2022-09-05T04:36:32.000+0000",\n              "action": "force_replace",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "project_object"\n            },\n            {\n              "id": "1334ECBB11E78F4D109F0080EFD55D0D",\n              "name": "SaveAsDocumentTest",\n              "version": "6283BF7211EB7CA13A950080EFE5963B",\n              "type": 55,\n              "owner": {\n                "id": "54F3D26011D2896560009A8E67019608"\n              },\n              "dateCreated": "2017-09-01T19:38:06.000+0000",\n              "dateModified": "2021-03-04T04:23:35.000+0000",\n              "action": "use_existing",\n              "includeDependents": false,\n              "explicitIncluded": true,\n              "level": "project_object"\n            }\n          ]\n        }\n      },\n      "importInfo": {\n        "id": "597576B451BB46CFBDD29FB71EC5CC98",\n        "groupId": "FB6A954D2AB14BB09E2F98B72E634224",\n        "creator": {},\n        "creationDate": "2022-09-08T06:47:19.599+0000",\n        "lastUpdatedDate": "2022-09-08T06:47:19.599+0000",\n        "status": "pending",\n        "progress": 0.0,\n        "message": "",\n        "undoStorage": {},\n        "project": {\n          "id": "B19DEDCC11D4E0EFC000EB9495D0F44F",\n          "name": "name"\n        },\n        "deleted": false\n      }\n    }\n  ],\n  "version": "1"\n}\n')),(0,r.kt)("h2",{id:"performance"},"Performance"),(0,r.kt)("p",null,"To improve performance, MicroStrategy suggests you edit one migration or migration group per session and time."),(0,r.kt)("h2",{id:"compatibility"},"Compatibility"),(0,r.kt)("p",null,"A migration or migration group created in an earlier platform version can be edited in the newer platform version."),(0,r.kt)("h2",{id:"suggestions"},"Suggestions"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The user should have Architect privileges in both source and target environments."),(0,r.kt)("li",{parentName:"ul"},"Due to databases being distributed across environments, make sure to connect to the source environment when viewing migration status."),(0,r.kt)("li",{parentName:"ul"},"Project information must be provided in the request body when editing migrations or migration groups."),(0,r.kt)("li",{parentName:"ul"},"Requests to edit migrations are subject to the restrictions for creating migrations, as are editing migration groups.")),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If the Library server cannot connect to the database, you may receive the following error:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The API requires MicroStrategy Storage Service. Please contact your administrator."),(0,r.kt)("li",{parentName:"ul"},"This can occur due to the following reasons:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Database is not running"),(0,r.kt)("li",{parentName:"ul"},"Database version is lower than required"),(0,r.kt)("li",{parentName:"ul"},"Database configuration is missing or invalid in ",(0,r.kt)("inlineCode",{parentName:"li"},"configOverride.properties")))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"If your storage location is not configured property, you may receive the following message:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The Storage Service is not configured properly, please contact your administrator to configure Storage Service"),(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"https://www2.microstrategy.com/producthelp/Current/Workstation/WebHelp/Lang_1033/Content/storage_service_config_workstation.htm"},"Configure the Storage Service via Workstation")," for more information.")))))}E.isMDXComponent=!0}}]);