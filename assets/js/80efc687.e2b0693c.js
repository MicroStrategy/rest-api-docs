"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[7090],{8629:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>a,toc:()=>m});var i=t(74848),r=t(28453);const s={title:"Create a runtime",sidebar_label:"Create a runtime",description:"This workflow sample demonstrates how to create a new runtime object through the REST API."},o=void 0,a={id:"common-workflows/administration/manage-runtime-objects/create-a-runtime",title:"Create a runtime",description:"This workflow sample demonstrates how to create a new runtime object through the REST API.",source:"@site/docs/common-workflows/administration/manage-runtime-objects/create-a-runtime.md",sourceDirName:"common-workflows/administration/manage-runtime-objects",slug:"/common-workflows/administration/manage-runtime-objects/create-a-runtime",permalink:"/rest-api-docs/common-workflows/administration/manage-runtime-objects/create-a-runtime",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/administration/manage-runtime-objects/create-a-runtime.md",tags:[],version:"current",lastUpdatedBy:"ziyuhehe",lastUpdatedAt:1710490354,formattedLastUpdatedAt:"Mar 15, 2024",frontMatter:{title:"Create a runtime",sidebar_label:"Create a runtime",description:"This workflow sample demonstrates how to create a new runtime object through the REST API."},sidebar:"tutorialSidebar",previous:{title:"Retrieve a runtime definition",permalink:"/rest-api-docs/common-workflows/administration/manage-runtime-objects/retrieve-a-runtime-definition"},next:{title:"Update a runtime",permalink:"/rest-api-docs/common-workflows/administration/manage-runtime-objects/update-a-runtime"}},c={},m=[{value:"Workflow",id:"workflow",level:2},{value:"Create a new runtime using POST /api/runtimes",id:"create-a-new-runtime-using-post-apiruntimes",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Available:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Available",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{since:"2021 Update 7"}),"\n",(0,i.jsx)(n.p,{children:"This workflow sample demonstrates how to create a new runtime object through the REST API."}),"\n",(0,i.jsx)(n.p,{children:"The runtime is a configuration level object."}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Get the authorization token needed to execute the request with ",(0,i.jsx)(n.a,{href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Authentication/postLogin",children:"POST /api/auth/login"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"workflow",children:"Workflow"}),"\n",(0,i.jsxs)(n.h3,{id:"create-a-new-runtime-using-post-apiruntimes",children:["Create a new runtime using ",(0,i.jsx)(n.a,{href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Runtimes/createScriptRuntime",children:"POST /api/runtimes"})]}),"\n",(0,i.jsxs)(n.p,{children:["In this step, you are creating a new runtime with name ",(0,i.jsx)(n.code,{children:"Test Runtime"}),", whitelist ",(0,i.jsx)(n.code,{children:"10.10.10.0/24"}),", and package ",(0,i.jsx)(n.code,{children:"mstrio-py"}),", along with some other properties."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"whitelist"})," decides the reachable destination of this runtime, its format should follow CIDR (Classless Inter-Domain Routing)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages"})," indicates the preinstalled packages for this runtime, if the scripts require some special packages, it could be defined here."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"execTimeout"})," means the scripts using this runtime could NOT be executed more than this time. If the script execution is time-consuming, the user needs to enlarge this timeout value."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"resource"})," is used to control the maximum resource that could be allocated for this runtime. The unit for ",(0,i.jsx)(n.strong,{children:"mem"})," field is MB, so 512 means the maximum memory allocated for this runtime is 512MB, otherwise, it would be out of memory. The ",(0,i.jsx)(n.strong,{children:"cpu"})," resource is measured in ",(0,i.jsx)(n.em,{children:"cpu"})," units. 1 CPU unit is equivalent to 1 physical CPU core, or 1 virtual core, depending on whether it runs in a physical host or a virtual machine running inside a physical machine. 0.2 means requesting 20% as much CPU time compared to if you asked for 1.0 CPU."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"runtimeVersion"})," is for the Python version, usually, we would support the latest stable version."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"minCachedInstances"})," and ",(0,i.jsx)(n.code,{children:"maxCachedInstances"})," are used to adjust the minimum and maximum cached instance number for the runtime pool, which is usually used for performance tuning."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"others"})," is a reserved field, and isn't used for now."]}),"\n"]})}),"\n",(0,i.jsx)(n.p,{children:"Sample Request Header:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'"accept": "application/json"\n"X-MSTR-AuthToken": "pisu5dkkutqfblaamdomgr00ch"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Sample Request Body:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "Test Runtime",\n  "description": "This is a test runtime",\n  "whitelist": ["10.10.10.0/24"],\n  "packages": [\n    {\n      "name": "mstrio-py",\n      "version": "",\n      "description": ""\n    }\n  ],\n  "resource": {\n    "cpu": "0.2",\n    "mem": 512\n  },\n  "execTimeout": 600,\n  "minCachedInstances": 0,\n  "maxCachedInstances": 5,\n  "runtimeVersion": "3.10.5",\n  "others": ""\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Sample Curl:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X \"POST\" \\\n  \"https://demo.microstrategy.com/MicroStrategyLibrary/api/runtimes\" \\\n  -H \"accept: application/json\" \\\n  -H \"X-MSTR-AuthToken: pisu5dkkutqfblaamdomgr00ch\" \\\n  -H \"Content-Type: application/json\" \\\n  -d \"{\n  'name': 'Test Runtime',\n  'description': 'This is a test runtime',\n  'whitelist': [\n    '10.10.10.0/24'\n  ],\n  'packages': [\n    {\n      'name': 'mstrio-py',\n      'version': '',\n      'description': ''\n    }\n  ],\n  'resource': {\n    'cpu': '0.2',\n    'mem': 512\n  },\n  'execTimeout': 600,\n  'minCachedInstances': 0,\n  'maxCachedInstances': 5,\n  'runtimeVersion': '3.10.5',\n  'others': ''\n}\"\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sample Response Body:"}),"\n",(0,i.jsx)(n.p,{children:"You can view the new runtime id in the body of the response."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "E6C5BF4C483FF06313BEE19EAD39978B"\n}\n'})})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);