"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[6785],{21492:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=n(74848),t=n(28453);const r={title:"Manage Watch KPI and Insight service privileges",description:"A high-level workflow sample for managing Watch KPI and Insight service privileges is shown below. The sequence of REST API requests in the following procedure allows an administrative user to assign server-level privilege for a specific user or user group to use Watch KPI and Insight service."},o=void 0,a={id:"common-workflows/administration/server-management/server-level-privileges/watch-kpi-insight-service-privileges",title:"Manage Watch KPI and Insight service privileges",description:"A high-level workflow sample for managing Watch KPI and Insight service privileges is shown below. The sequence of REST API requests in the following procedure allows an administrative user to assign server-level privilege for a specific user or user group to use Watch KPI and Insight service.",source:"@site/docs/common-workflows/administration/server-management/server-level-privileges/watch-kpi-insight-service-privileges.md",sourceDirName:"common-workflows/administration/server-management/server-level-privileges",slug:"/common-workflows/administration/server-management/server-level-privileges/watch-kpi-insight-service-privileges",permalink:"/rest-api-docs/common-workflows/administration/server-management/server-level-privileges/watch-kpi-insight-service-privileges",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/administration/server-management/server-level-privileges/watch-kpi-insight-service-privileges.md",tags:[],version:"current",lastUpdatedBy:"wangrenhang",lastUpdatedAt:1711017072,formattedLastUpdatedAt:"Mar 21, 2024",frontMatter:{title:"Manage Watch KPI and Insight service privileges",description:"A high-level workflow sample for managing Watch KPI and Insight service privileges is shown below. The sequence of REST API requests in the following procedure allows an administrative user to assign server-level privilege for a specific user or user group to use Watch KPI and Insight service."},sidebar:"tutorialSidebar",previous:{title:"Manage server-level privileges",permalink:"/rest-api-docs/common-workflows/administration/server-management/server-level-privileges/manage-server-level-privileges"},next:{title:"Manage server settings",permalink:"/rest-api-docs/common-workflows/administration/server-management/manage-server-settings"}},l={},c=[{value:"Assign privilege to use Watch KPI and Insight service to users",id:"assign-privilege-to-use-watch-kpi-and-insight-service-to-users",level:2},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Query the status of submitted command",id:"query-the-status-of-submitted-command",level:2},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response-1",level:3}];function d(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components},{Available:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Available",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n,{since:"2021 Update 8"}),"\n",(0,i.jsx)(s.p,{children:"A high-level workflow sample for managing Watch KPI and Insight service privileges is shown below. The sequence of REST API requests in the following procedure allows an administrative user to assign server-level privilege for a specific user or user group to use Watch KPI and Insight service."}),"\n",(0,i.jsxs)(s.p,{children:["For the privileges to use Watch KPI and Insight service, please refer to ",(0,i.jsx)(s.a,{href:"https://www2.microstrategy.com/producthelp/2021/Library/en-us/Content/insights_privileges.htm",children:"Assign privileges to MicroStrategy Insight"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"A detailed explanation of each step is provided below:"}),"\n",(0,i.jsx)(s.h2,{id:"assign-privilege-to-use-watch-kpi-and-insight-service-to-users",children:"Assign privilege to use Watch KPI and Insight service to users"}),"\n",(0,i.jsx)(s.p,{children:"Endpoints:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"POST /api/iserver/metadata/commands"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["These endpoints allow administrative users to submit commands to manipulate metadata on IServer. First, you obtain the authorization token needed to execute the request using ",(0,i.jsx)(s.code,{children:"POST /api/auth/login"}),". Then, you pass the authorization token in the request header. You provide the information in the parameters of the request."]}),"\n",(0,i.jsxs)(s.p,{children:['To auto-grant Watch KPI privileges ("Use Library Watchlist" and "Use Library Insight") for Library users (who has "Use Library Web" privilege), you need to call this API with query parameter ',(0,i.jsx)(s.code,{children:"commandId"})," set to ",(0,i.jsx)(s.code,{children:"1"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"The example below demonstrates how to assign privilege to use Watch KPI and Insight service to users."}),"\n",(0,i.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,i.jsx)(s.p,{children:"Request Parameters:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"X-MSTR-AuthToken"})}),"\n",(0,i.jsxs)(s.p,{children:["The authorization token generated by ",(0,i.jsx)(s.code,{children:"POST /api/auth/login"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"commandId"})}),"\n",(0,i.jsxs)(s.p,{children:["The command ID defined by IServer. For assigning privileges to use Watch KPI and Insight service, the command ID is ",(0,i.jsx)(s.code,{children:"1"}),". The valid command is only ",(0,i.jsx)(s.code,{children:"1"})," for now."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Request Header:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"'Accept: application/json'\n\u2018X-MSTR-AuthToken: djoofk6kq8htka6emv15246959\u2019\n"})}),"\n",(0,i.jsx)(s.p,{children:"Request Body:"}),"\n",(0,i.jsx)(s.p,{children:"No request body."}),"\n",(0,i.jsx)(s.p,{children:"Curl:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'curl -X POST "http://localhost:8282/consume-dev/api/iserver/metadata/commands?commandId=1" -H "accept: application/json" -H "X-MSTR-AuthToken: djoofk6kq8htka6emv15246959"\n'})}),"\n",(0,i.jsx)(s.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,i.jsx)(s.p,{children:"Response Header:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"access-control-allow-headers: Content-Type\naccess-control-allow-methods: POST\ncache-control: no-store\ncontent-encoding: gzip\ncontent-length: 1307\ncontent-security-policy: frame-ancestors 'self'\ncontent-type: application/json\ndate: Thu, 27 Feb 2020 00:28:01 GMT\nx-content-type-options: nosniff\nx-xss-protection: 1; mode=block\n"})}),"\n",(0,i.jsx)(s.p,{children:"Response Body:"}),"\n",(0,i.jsxs)(s.p,{children:["The API returns the href to query the status of the submitted command. You can then use the API ",(0,i.jsx)(s.code,{children:"GET \u200b/api\u200b/iserver\u200b/queues\u200b/{id}"})," to query the status of the submitted command."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "link": {\n    "href": "/queues/9E4799C94823E297DAC9808357575AF5",\n    "type": "GET"\n  }\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:"Response Code: 200 (Success)"}),"\n",(0,i.jsx)(s.h2,{id:"query-the-status-of-submitted-command",children:"Query the status of submitted command"}),"\n",(0,i.jsxs)(s.p,{children:["The following endpoints, used to query the status of submitted command by the API ",(0,i.jsx)(s.code,{children:"POST /api/iserver/metadata/commands"}),"."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"GET \u200b/api\u200b/iserver\u200b/queues\u200b/{id}"})}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,i.jsx)(s.p,{children:"Request Parameters:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"X-MSTR-AuthToken"})}),"\n",(0,i.jsx)(s.p,{children:"The authorization token generated by `POST /api/auth/login.``"}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"id"})}),"\n",(0,i.jsxs)(s.p,{children:["The ID of the submitted command retrieved from the response of ",(0,i.jsx)(s.code,{children:"POST /api/iserver/metadata/commands"})," on success."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Request Header:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:'\'Accept: application/json\'\n"X-MSTR-AuthToken": "pdcmrontjrlf494tl1eu6nt7hg"\n'})}),"\n",(0,i.jsx)(s.p,{children:"Request Parameters:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:'"X-MSTR-AuthToken": " pdcmrontjrlf494tl1eu6nt7hg",\n"id": "9E4799C94823E297DAC9808357575AF5"\n'})}),"\n",(0,i.jsx)(s.p,{children:"Curl:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'curl -X GET "http://localhost:8282/consume-dev/api/iserver/queues/9E4799C94823E297DAC9808357575AF5" -H "accept: application/json" -H "X-MSTR-AuthToken: cmjt8jfn2ucl260lqtrhh4gips"\n'})}),"\n",(0,i.jsx)(s.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,i.jsx)(s.p,{children:"Response Header:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"access-control-allow-headers: Content-Type\naccess-control-allow-methods: GET\ncache-control: no-store\ncontent-encoding: gzip\ncontent-length: 790\ncontent-security-policy: frame-ancestors 'self'\ncontent-type: application/json\ndate: Thu, 27 Feb 2020 16:38:44 GMT\nx-content-type-options: nosniff\nx-xss-protection: 1; mode=block\n"})}),"\n",(0,i.jsx)(s.p,{children:"Response Body:"}),"\n",(0,i.jsxs)(s.p,{children:["The REST server returns a JSON object that contains the information of the submitted task. Status ",(0,i.jsx)(s.code,{children:"3"})," indicates the command finishes successfully."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "status": 3,\n  "progress": 100,\n  "iServerErrorCode": 0\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:"Response Code: 200 (Success: OK)"})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var i=n(96540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);