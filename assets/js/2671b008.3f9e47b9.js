"use strict";(self.webpackChunkrest_api_docs=self.webpackChunkrest_api_docs||[]).push([[4577],{65645:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var a=t(74848),o=t(28453);const s={title:"Update a table's physical table structure",sidebar_label:"Update a table's physical table structure",description:"This workflow sample demonstrates how to update a table's physical table structure through the Modeling service."},i=void 0,r={id:"common-workflows/modeling/manage-table-objects/update-a-tables-physical-table-structure",title:"Update a table's physical table structure",description:"This workflow sample demonstrates how to update a table's physical table structure through the Modeling service.",source:"@site/docs/common-workflows/modeling/manage-table-objects/update-a-tables-physical-table-structure.md",sourceDirName:"common-workflows/modeling/manage-table-objects",slug:"/common-workflows/modeling/manage-table-objects/update-a-tables-physical-table-structure",permalink:"/rest-api-docs/common-workflows/modeling/manage-table-objects/update-a-tables-physical-table-structure",draft:!1,unlisted:!1,editUrl:"https://github.com/MicroStrategy/rest-api-docs/tree/public/docs/common-workflows/modeling/manage-table-objects/update-a-tables-physical-table-structure.md",tags:[],version:"current",lastUpdatedBy:"wangrenhang",lastUpdatedAt:1711017072,formattedLastUpdatedAt:"Mar 21, 2024",frontMatter:{title:"Update a table's physical table structure",sidebar_label:"Update a table's physical table structure",description:"This workflow sample demonstrates how to update a table's physical table structure through the Modeling service."},sidebar:"tutorialSidebar",previous:{title:"Update a partition mapping table's definition",permalink:"/rest-api-docs/common-workflows/modeling/manage-table-objects/update-a-partition-mapping-tables-definition"},next:{title:"Manage transformation objects",permalink:"/rest-api-docs/common-workflows/modeling/manage-transformation-objects/"}},l={},c=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsx)(n.p,{children:"You can try out this workflow at [REST API Playground]."}),(0,a.jsxs)(n.p,{children:["Learn more about MicroStrategy REST API Playground ",(0,a.jsx)(n.a,{href:"/rest-api-docs/getting-started/playground",children:"here"}),"."]})]}),"\n",(0,a.jsx)(n.p,{children:"This workflow sample demonstrates how to update an existing table's physical table structure through the Modeling service."}),"\n",(0,a.jsxs)(n.p,{children:["In this workflow sample, you update an existing ",(0,a.jsx)(n.code,{children:'"CITY_CTR_SLS"'})," table's physical table structure in the MicroStrategy Tutorial project. The project ID is ",(0,a.jsx)(n.code,{children:"B19DEDCC11D4E0EFC000EB9495D0F44F"}),"."]}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsxs)(n.p,{children:["Get the authorization token needed to execute the request with ",(0,a.jsx)(n.a,{href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Authentication/postLogin",children:"POST /api/auth/login"}),"."]}),(0,a.jsxs)(n.p,{children:["Get the project ID from ",(0,a.jsx)(n.a,{href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Projects/getProjects_1",children:"GET /api/projects"}),"."]})]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["Changesets are used in this workflow. For information on how to create and use changesets, see ",(0,a.jsx)(n.a,{href:"/rest-api-docs/common-workflows/modeling/changesets",children:"Changesets"}),"."]})}),"\n",(0,a.jsxs)(n.p,{children:["Update the ",(0,a.jsx)(n.code,{children:'"CITY_CTR_SLS"'})," table's physical table structure using ",(0,a.jsx)(n.a,{href:"https://demo.microstrategy.com/MicroStrategyLibrary/api-docs/index.html#/Tables/ms-refreshPhysicalTable",children:"POST /api/model/tables/{tableId}/physicalTable/refresh"}),". The object ID of the table is ",(0,a.jsx)(n.code,{children:"862780DC499A14D74FEC7EB2EF317DA2"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"If table is missing, table cannot be updated. If the physical table is a free form sql table\uff0cit will do nothing. If column is changed, consider following 3 cases."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Normal table that does not have secondary DBRole."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"New columns: Add new columns to DbTable according to column merge option."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Column missing: If the missing column is used by any fact or attribute in the table, column will not be removed. If it is not mapped to attribute or fact, remove column reference from table. If the column is not used by other table, delete the column."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Column data type change: Change column data type according to new data type."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Table that has secondary DBRole case: Need to check each warehouse table\u2019s schema for both primary DBRole and secondary DBRole list."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"If the new table structure does not meet secondary DBRole condition (column missing, data type incompatible), update will be rejected."}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"If column data type is changed and still compatible, adjust to maximum denominator data type."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Warehouse partition case: Need to check top level PMT table and lower level partition table schema."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Top level PMT table: If column ",(0,a.jsx)(n.code,{children:"\u201cPBTNAME\u201d"})," is missing, update will be rejected. For other columns, the rules are same with normal table."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Partition table: Only check the first table in ",(0,a.jsx)(n.code,{children:"\u201cPBTNAME\u201c"})," and update structure as normal table."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"If top level PMT table has secondary DBRole, need to check the secondary DBRole table schema."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"columnMergeOption"})," query parameter is used to define column merge options. For example, a project includes a table named Table1 with a C1 column and a char(1) data type. When you add a new table named Table2 with a C1 column and char(4) data type, the column data types are modified in the following ways for consistency."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"reuse_any"}),": Updates the column data type to use the most recent column definition. In the example above, the column data type for C1 is updated to char(4) because Table2 was added after Table1."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"reuse_compatible_data_type"}),": Updates the column data type to use the data type with the largest precision or scale. In the example above, the column data type for C1 is updated to char(4), as defined in Table2."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"reuse_matched_data_type"}),": Renames the column in the newly added table to allow it to have different data types. In the example above, column C1 uses char(1) for Table1. Column C1 in Table2 is defined as a separate copy of C1 and uses char(4). This option can cause unwanted schema changes and should only be used when necessary. If this value is not set, use the option that is applied on the warehouse catalog setting."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Sample Request Header:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-http",children:'"accept": "application/json"\n"X-MSTR-AuthToken": "ns42kvi9lb36ae7g3scphn0ga9"\n"X-MSTR-MS-Changeset": "8DF1659E9D74484D9D47B9478D4C7D00"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Sample Request Body: Empty"}),"\n",(0,a.jsx)(n.p,{children:"Sample Curl:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://demo.microstrategy.com/MicroStrategyLibrary/api/model/tables/862780DC499A14D74FEC7EB2EF317DA2/physicalTable/refresh" -H "accept: application/json" -H "X-MSTR-AuthToken: ns42kvi9lb36ae7g3scphn0ga9" -H "X-MSTR-MS-Changeset: 8DF1659E9D74484D9D47B9478D4C7D00" -H "Content-Type: application/json"}"\n'})}),"\n",(0,a.jsx)(n.p,{children:"Sample Response Body:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "information": {\n    "dateCreated": "2002-02-14T23:06:02.000Z",\n    "dateModified": "2012-06-06T12:12:35.000Z",\n    "versionId": "215230EB4F7089CD0261C1AD12D621AD",\n    "acg": 255,\n    "primaryLocale": "en-US",\n    "objectId": "862780DC499A14D74FEC7EB2EF317DA2",\n    "subType": "logical_table",\n    "name": "CITY_CTR_SLS"\n  },\n  "physicalTable": {\n    "information": {\n      "dateCreated": "2002-02-14T23:04:18.000Z",\n      "dateModified": "2012-06-06T12:12:35.000Z",\n      "versionId": "215230EB4F7089CD0261C1AD12D621AD",\n      "acg": 255,\n      "primaryLocale": "en-US",\n      "objectId": "E278D17342991E49710D6F90E2A7BF2C",\n      "subType": "physical_table",\n      "name": "CITY_CTR_SLS"\n    },\n    "tableName": "CITY_CTR_SLS",\n    "columns": [\n      {\n        "information": {\n          "dateCreated": "2001-01-02T20:48:30.000Z",\n          "dateModified": "2012-06-06T12:12:35.000Z",\n          "versionId": "215230EB4F7089CD0261C1AD12D621AD",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "8D6791B211D3E4981000E787EC6DE8A4",\n          "subType": "column",\n          "name": "CUST_CITY_ID"\n        },\n        "dataType": {\n          "type": "integer",\n          "precision": 2,\n          "scale": -2147483648\n        },\n        "columnName": "CUST_CITY_ID"\n      },\n      {\n        "information": {\n          "dateCreated": "2001-01-02T20:48:32.000Z",\n          "dateModified": "2012-06-06T12:12:35.000Z",\n          "versionId": "215230EB4F7089CD0261C1AD12D621AD",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "8D67917E11D3E4981000E787EC6DE8A4",\n          "subType": "column",\n          "name": "CALL_CTR_ID"\n        },\n        "dataType": {\n          "type": "integer",\n          "precision": 2,\n          "scale": 0\n        },\n        "columnName": "CALL_CTR_ID"\n      },\n      {\n        "information": {\n          "dateCreated": "2001-01-02T20:48:35.000Z",\n          "dateModified": "2012-06-06T12:13:04.000Z",\n          "versionId": "256D148442065F43BDC42FBB79438A3F",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "8D6792A011D3E4981000E787EC6DE8A4",\n          "subType": "column",\n          "name": "TOT_DOLLAR_SALES"\n        },\n        "dataType": {\n          "type": "double",\n          "precision": 8,\n          "scale": 0\n        },\n        "columnName": "TOT_DOLLAR_SALES"\n      },\n      {\n        "information": {\n          "dateCreated": "2001-01-02T20:48:34.000Z",\n          "dateModified": "2012-06-06T12:13:04.000Z",\n          "versionId": "256D148442065F43BDC42FBB79438A3F",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "8D67929F11D3E4981000E787EC6DE8A4",\n          "subType": "column",\n          "name": "TOT_UNIT_SALES"\n        },\n        "dataType": {\n          "type": "double",\n          "precision": 8,\n          "scale": 0\n        },\n        "columnName": "TOT_UNIT_SALES"\n      },\n      {\n        "information": {\n          "dateCreated": "2001-09-18T19:59:30.000Z",\n          "dateModified": "2012-06-06T12:13:04.000Z",\n          "versionId": "256D148442065F43BDC42FBB79438A3F",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "7A4ABDFD11D5AC6FC000D98A4CC5F24F",\n          "subType": "column",\n          "name": "TOT_COST"\n        },\n        "dataType": {\n          "type": "double",\n          "precision": 8,\n          "scale": 0\n        },\n        "columnName": "TOT_COST"\n      },\n      {\n        "information": {\n          "dateCreated": "2007-01-08T12:22:02.000Z",\n          "dateModified": "2012-06-06T12:12:35.000Z",\n          "versionId": "215230EB4F7089CD0261C1AD12D621AD",\n          "acg": 255,\n          "primaryLocale": "en-US",\n          "objectId": "E50524EE420B2F1F441EFE9752DFBD7A",\n          "subType": "column",\n          "name": "New GROSS_DOLLAR_SALES (2)"\n        },\n        "dataType": {\n          "type": "double",\n          "precision": 8,\n          "scale": 0\n        },\n        "columnName": "GROSS_DOLLAR_SALES"\n      }\n    ],\n    "namespace": "",\n    "tablePrefix": "",\n    "type": "normal"\n  },\n  "logicalSize": 15,\n  "isLogicalSizeLocked": false,\n  "isTrueKey": true,\n  "isPartOfPartition": false,\n  "tableKey": [\n    {\n      "objectId": "8D679D3511D3E4981000E787EC6DE8A4",\n      "subType": "attribute",\n      "name": "Call Center"\n    },\n    {\n      "objectId": "8D679D3A11D3E4981000E787EC6DE8A4",\n      "subType": "attribute",\n      "name": "Customer City"\n    }\n  ],\n  "attributes": [\n    {\n      "information": {\n        "objectId": "8D679D3511D3E4981000E787EC6DE8A4",\n        "subType": "attribute",\n        "name": "Call Center"\n      },\n      "forms": [\n        {\n          "formCategory": {\n            "objectId": "45C11FA478E745FEA08D781CEA190FE5",\n            "subType": "attribute_form_system",\n            "name": "ID"\n          },\n          "name": "ID",\n          "dataFormat": "number",\n          "isKeyForm": true,\n          "lookupTable": {\n            "objectId": "8D67933211D3E4981000E787EC6DE8A4",\n            "subType": "logical_table",\n            "name": "LU_CALL_CTR"\n          },\n          "expression": {\n            "text": "CALL_CTR_ID"\n          }\n        },\n        {\n          "formCategory": {\n            "objectId": "035E890A4157E9828414E8A0E13E2998",\n            "subType": "attribute_form_custom",\n            "name": "Call Center None"\n          },\n          "name": "Hyperlink",\n          "dataFormat": "number",\n          "isKeyForm": false,\n          "lookupTable": {\n            "objectId": "8D67933211D3E4981000E787EC6DE8A4",\n            "subType": "logical_table",\n            "name": "LU_CALL_CTR"\n          },\n          "expression": {\n            "text": "ApplySimple(\\"\'<a href=Main.aspx?evt=4001&src=Main.aspx.4001&reportID=B4DEFC04457E9CBE0CA79FB692BE0C5E&elementsPromptAnswers=8D679D3511D3E4981000E787EC6DE8A4;8D679D3511D3E4981000E787EC6DE8A4%3A\'&#0&\' target=_blank>Details</a>\'\\",CALL_CTR_ID)"\n          }\n        }\n      ]\n    },\n    {\n      "information": {\n        "objectId": "8D679D3A11D3E4981000E787EC6DE8A4",\n        "subType": "attribute",\n        "name": "Customer City"\n      },\n      "forms": [\n        {\n          "formCategory": {\n            "objectId": "45C11FA478E745FEA08D781CEA190FE5",\n            "subType": "attribute_form_system",\n            "name": "ID"\n          },\n          "name": "ID",\n          "dataFormat": "number",\n          "isKeyForm": true,\n          "lookupTable": {\n            "objectId": "8D67934A11D3E4981000E787EC6DE8A4",\n            "subType": "logical_table",\n            "name": "LU_CUST_CITY"\n          },\n          "expression": {\n            "text": "CUST_CITY_ID"\n          }\n        }\n      ]\n    }\n  ],\n  "facts": [\n    {\n      "information": {\n        "objectId": "7A4ABE9111D5AC6FC000D98A4CC5F24F",\n        "subType": "fact",\n        "name": "Cost"\n      },\n      "expression": {\n        "text": "TOT_COST"\n      }\n    },\n    {\n      "information": {\n        "objectId": "F30CB66411D5AC5FC000D98A4CC5F24F",\n        "subType": "fact",\n        "name": "Profit"\n      },\n      "expression": {\n        "text": "TOT_DOLLAR_SALES - TOT_COST"\n      }\n    },\n    {\n      "information": {\n        "objectId": "8D67958411D3E4981000E787EC6DE8A4",\n        "subType": "fact",\n        "name": "Revenue"\n      },\n      "expression": {\n        "text": "TOT_DOLLAR_SALES"\n      }\n    },\n    {\n      "information": {\n        "objectId": "8D67958511D3E4981000E787EC6DE8A4",\n        "subType": "fact",\n        "name": "Units Sold"\n      },\n      "expression": {\n        "text": "TOT_UNIT_SALES"\n      }\n    },\n    {\n      "information": {\n        "objectId": "6EA98A164E62D247C14B3EBFA4866411",\n        "subType": "fact",\n        "name": "Gross Revenue"\n      },\n      "expression": {\n        "text": "GROSS_DOLLAR_SALES"\n      }\n    }\n  ],\n  "primaryDataSource": {\n    "objectId": "37BE16AB11D3E48C1000E787EC6DE8A4",\n    "subType": "db_role",\n    "name": "Tutorial Data"\n  },\n  "secondaryDataSources": []\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Response Code: 200 (On success, the API returns a list of logical tables and their specific field information.)"})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var a=t(96540);const o={},s=a.createContext(o);function i(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);